<turbo-stream target="messages" action="append">
  <template>
    <%= render partial: "psychologist_messages/message", formats: [:html], locals: { message: @message } %>
  </template>
</turbo-stream>

<turbo-stream target="new_message" action="replace">
  <template>
    <%= form_with url: appointment_psychologist_messages_path(@appointment), model: PsychologistMessage.new, data: { turbo_stream: true }, class: "message-form" do |f| %>
      <%= f.text_area :content, placeholder: "Type a message...", rows: 2, class: "form-control mb-2" %>
      <%= f.submit "Send", class: "btn btn-primary" %>
    <% end %>
  </template>
</turbo-stream>
